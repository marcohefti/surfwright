# SurfWright browser-control exam campaign (16 active missions) via native Codex runtime.
# Versioned baseline spec with split prompts/oracles for repeatable ZCL feedback campaigns.
schemaVersion: 1
campaignId: surfwright-browser-control-native
outRoot: .zcl
promptMode: exam

totalMissions: 16
canaryMissions: 3
failFast: false

missionSource:
  promptSource:
    path: ../../missions/browser-control/prompts
  oracleSource:
    path: ../../missions/browser-control/oracles
    visibility: workspace
  selection:
    mode: mission_id
    missionIds:
      - 001-first-pass-orientation
      - 002-modal-lifecycle
      - 003-multimatch-disambiguation
      - 004-style-inspection
      - 005-login-success
      - 006-checkbox-toggle
      - 007-dropdown-select
      - 008-javascript-alert-dialog
      - 009-iframe-edit
      - 010-new-window-spawn
      - 011-file-upload
      - 012-dynamic-controls-enable
      - 013-dynamic-loading
      - 014-infinite-scroll-chunks
      - 015-download-file
      - 016-docs-commands-extract

evaluation:
  mode: oracle
  evaluator:
    kind: builtin_rules
  oraclePolicy:
    mode: normalized
    formatMismatch: warn

execution:
  flowMode: sequence

pairGate:
  enabled: true
  stopOnFirstMissionFailure: false
  traceProfile: none

timeouts:
  campaignGlobalTimeoutMs: 7200000
  defaultAttemptTimeoutMs: 180000
  cleanupHookTimeoutMs: 10000
  timeoutStart: first_tool_call

flows:
  - flowId: codex-native
    runner:
      type: codex_app_server
      sessionIsolation: native
      runtimeStrategies: ["codex_app_server"]
      model: gpt-5.3-codex-spark
      modelReasoningEffort: low
      modelReasoningPolicy: best_effort
      feedbackPolicy: strict
      mode: discovery
      freshAgentPerAttempt: true
      toolDriver:
        kind: mcp_proxy
      finalization:
        mode: auto_from_result_json
        minResultTurn: 3
        resultChannel:
          kind: file_json
          path: mission.result.json
      mcp:
        maxToolCalls: 100
        idleTimeoutMs: 45000
        shutdownOnComplete: true
      env:
        ZCL_NATIVE_MAX_INFLIGHT_PER_STRATEGY: "6"
        ZCL_NATIVE_MIN_START_INTERVAL_MS: "150"
