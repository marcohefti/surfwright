{
  "files": {
    "include": ["**/*"],
    "exclude": ["dist/**", "node_modules/**", ".git/**", ".idea/**"]
  },
  "rules": [
    {
      "name": "feature-boundaries",
      "enabled": true,
      "options": {
        "include": ["src/features/**/*.ts"],
        "exclude": []
      }
    },
    {
      "name": "feature-core-imports",
      "enabled": true,
      "options": {
        "include": ["src/features/**/*.ts"],
        "exclude": [],
        "allowCoreImports": [
          "src/core/cli-contract",
          "src/core/daemon/public",
          "src/core/extensions/public",
          "src/core/network/public",
          "src/core/network-types",
          "src/core/pipeline/public",
          "src/core/skills/public",
          "src/core/session/public",
          "src/core/state/public",
          "src/core/target/public",
          "src/core/types",
          "src/core/update/public",
          "src/core/request-context",
          "src/core/*/public"
        ]
      }
    },
    {
      "name": "surface-command-purity",
      "enabled": true,
      "options": {
        "include": ["src/features/**/*.ts"],
        "exclude": []
      }
    },
    {
      "name": "feature-layer-purity",
      "enabled": true,
      "options": {
        "include": ["src/features/**/domain/**/*.ts", "src/features/**/usecases/**/*.ts"],
        "exclude": []
      }
    },
    {
      "name": "core-boundaries",
      "enabled": true,
      "options": {
        "include": ["src/core/**/*.ts"],
        "exclude": [],
        "boundedDomains": [
          "session",
          "state",
          "shared",
          "target",
          "daemon",
          "extensions",
          "network",
          "pipeline",
          "pipeline-support",
          "providers",
          "skills",
          "update"
        ],
        "allowCrossDomainInternal": [
          "src/core/*/public",
          "src/core/*/index",
          "src/core/session/infra/runtime-access",
          "src/core/daemon/infra/diagnostics",
          "src/core/daemon/domain/diagnostics"
        ]
      }
    },
    {
      "name": "core-root-state-imports",
      "enabled": true,
      "options": {
        "include": ["src/**/*.ts"],
        "exclude": [],
        "allowImportFromCoreRootState": ["src/core/state/**/*.ts"]
      }
    },
    {
      "name": "domain-no-cross-domain",
      "enabled": true,
      "options": {
        "include": ["src/core/**/domain/**/*.ts"],
        "exclude": [],
        "allowImportPrefixes": ["src/core/types", "src/core/shared", "src/core/contracts"]
      }
    },
    {
      "name": "boundary-json-parse",
      "enabled": true,
      "options": {
        "include": ["src/**/*.ts"],
        "exclude": [],
        "allowlist": [
          "src/cli.ts",
          "src/core/daemon/infra/daemon.ts",
          "src/core/daemon/infra/daemon-transport.ts",
          "src/core/daemon/infra/daemon-meta.ts",
          "src/core/daemon/infra/worker.ts",
          "src/core/daemon/infra/metadata-hygiene.ts",
          "src/core/extensions/infra/registry.ts",
          "src/core/profile/infra/profile-session.ts",
          "src/core/pipeline-support/infra/plan.ts",
          "src/core/daemon/app/worker-request-orchestrator.ts",
          "src/core/skills/infra/manager.ts",
          "src/core/state/infra/state-store.ts",
          "src/core/state/infra/state-file.ts",
          "src/core/state/infra/state-shards.ts",
          "src/core/state/infra/state-lock.ts",
          "src/core/target/infra/target-eval.ts",
          "src/core/target/infra/target-read.ts",
          "src/core/target/infra/utils/target-snapshot-diff.ts",
          "src/core/target/infra/network/target-network-capture.ts",
          "src/core/target/infra/network/target-network-check.ts",
          "src/core/target/infra/network/target-network-source.ts",
          "src/core/update/infra/config.ts",
          "src/core/update/infra/manager.ts",
          "src/core/workspace/infra/workspace.ts"
        ]
      }
    },
    {
      "name": "core-layer-purity",
      "enabled": true,
      "options": {
        "include": ["src/core/**/domain/**/*.ts", "src/core/**/app/**/*.ts"],
        "exclude": []
      }
    },
    {
      "name": "core-root-freeze",
      "enabled": true,
      "options": {
        "include": ["src/core/*.ts"],
        "exclude": [],
        "allowlist": [
          "src/core/action-id.ts",
          "src/core/browser.ts",
          "src/core/cli-contract.ts",
          "src/core/errors.ts",
          "src/core/network-types.ts",
          "src/core/pipeline.ts",
          "src/core/report-fields.ts",
          "src/core/request-context.ts",
          "src/core/session-isolation.ts",
          "src/core/session-report.ts",
          "src/core/types.ts"
        ]
      }
    },
    {
      "name": "core-domain-root-freeze",
      "enabled": true,
      "options": {
        "boundedDomains": [
          "session",
          "state",
          "shared",
          "target",
          "daemon",
          "extensions",
          "network",
          "pipeline",
          "pipeline-support",
          "providers",
          "skills",
          "update"
        ],
        "excludeDomains": [],
        "allowedRootFiles": ["index.ts", "public.ts"]
      }
    },
    {
      "name": "core-layer-direction",
      "enabled": true,
      "options": {
        "include": ["src/core/**/app/**/*.ts", "src/core/**/domain/**/*.ts", "src/core/**/infra/**/*.ts"],
        "exclude": [],
        "allowlist": [
          "src/core/session/app/hygiene.ts::../infra/session-env.js"
        ]
      }
    },
    {
      "name": "feature-layer-direction",
      "enabled": true,
      "options": {
        "include": ["src/features/**/*.ts"],
        "exclude": [],
        "allowlist": []
      }
    },
    {
      "name": "public-surface-curation",
      "enabled": true,
      "options": {
        "include": ["src/core/**/public.ts"],
        "exclude": [],
        "allowInfraInFiles": [
          "src/core/session/public.ts",
          "src/core/skills/public.ts",
          "src/core/target/public.ts",
          "src/core/update/public.ts",
          "src/core/workspace/public.ts"
        ]
      }
    },
    {
      "name": "core-providers-imports",
      "enabled": true,
      "options": {
        "include": ["src/core/**/*.ts"],
        "exclude": [],
        "allowPatterns": ["src/core/**/infra/**/*.ts", "src/core/providers/**/*.ts"]
      }
    },
    {
      "name": "state-boundaries",
      "enabled": true,
      "options": {
        "include": ["src/**/*.ts"],
        "exclude": [],
        "mutationBindings": [
          "allocateArtifactId",
          "allocateCaptureId",
          "allocateSessionId",
          "updateState",
          "upsertTargetState",
          "writeState"
        ],
        "allowMutationImportFromState": [
          "src/core/state/repo/**/*.ts"
        ]
      }
    },
    {
      "name": "cli-commander-options",
      "enabled": true,
      "options": {
        "include": ["src/features/**/commands/**/*.ts"],
        "exclude": []
      }
    },
    {
      "name": "max-files-per-directory",
      "enabled": true,
      "options": {
        "max": 12,
        "include": ["**/*"],
        "exclude": [
          "missions/browser-control/*.md",
          "missions/browser-control/prompts/*.md",
          "missions/browser-control/oracles/*.json"
        ]
      }
    },
    {
      "name": "max-loc",
      "enabled": true,
      "options": {
        "max": 500,
        "include": ["src/**/*.ts", "scripts/**/*.mjs", "test/**/*.mjs"],
        "exclude": []
      }
    },
    {
      "name": "core-layer-structure-budget",
      "enabled": true,
      "options": {
        "boundedDomains": [
          "session",
          "state",
          "shared",
          "target",
          "daemon",
          "extensions",
          "network",
          "pipeline",
          "pipeline-support",
          "providers",
          "skills",
          "update"
        ],
        "requiredDirs": ["app", "domain", "infra"],
        "excludeDomains": [],
        "maxMissingDomains": 11
      }
    },
    {
      "name": "core-node-imports-budget",
      "enabled": true,
      "options": {
        "include": ["src/core/**/*.ts"],
        "exclude": [],
        "allowPatterns": [
          "src/core/**/infra/**/*.ts",
          "src/core/providers/**/*.ts",
          "src/core/browser.ts",
          "src/core/cli-contract.ts"
        ],
        "maxViolations": 21
      }
    },
    {
      "name": "core-process-env-budget",
      "enabled": true,
      "options": {
        "include": ["src/**/*.ts"],
        "exclude": [],
        "allowPatterns": ["src/core/providers/**/*.ts", "src/cli.ts", "src/core/state/infra/state-store.ts"],
        "maxViolations": 6
      }
    },
    {
      "name": "typescript-no-explicit-any",
      "enabled": true,
      "options": {
        "include": ["src/**/*.ts"],
        "exclude": [],
        "allowlist": []
      }
    }
  ]
}
