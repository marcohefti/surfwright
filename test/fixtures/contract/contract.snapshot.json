{
  "name": "surfwright",
  "contractSchemaVersion": 1,
  "contractFingerprint": "sha256:9cff96eafe0b6e842eb35bc89e1be34531c907932187ee3cb0fa4afaedf0269f",
  "guarantees": [
    "deterministic output shape",
    "typed failures (code + message)",
    "json compact by default",
    "explicit handles for sessions and targets",
    "bounded runtime via explicit timeouts"
  ],
  "commands": [
    {
      "id": "contract",
      "usage": "surfwright contract [--no-json] [--pretty]",
      "summary": "emit machine-readable CLI contract and error codes"
    },
    {
      "id": "doctor",
      "usage": "surfwright doctor [--no-json] [--pretty]",
      "summary": "check node/chrome prerequisites without side effects"
    },
    {
      "id": "exp.effects",
      "usage": "surfwright exp effects <targetId> [--profile <preset>] [--include-declared] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "experimental scaffold for effect observation and coverage reporting"
    },
    {
      "id": "extension.list",
      "usage": "surfwright extension list [--no-json] [--pretty]",
      "summary": "list registered extension metadata"
    },
    {
      "id": "extension.load",
      "usage": "surfwright extension load <path> [--no-json] [--pretty] [--session <id>]",
      "summary": "register unpacked extension metadata with typed headless capability/fallback info"
    },
    {
      "id": "extension.reload",
      "usage": "surfwright extension reload <extensionRef> [--fail-if-missing] [--no-json] [--pretty] [--session <id>]",
      "summary": "mark a registered extension as reloaded and enabled (idempotent when missing)"
    },
    {
      "id": "extension.uninstall",
      "usage": "surfwright extension uninstall <extensionRef> [--fail-if-missing] [--no-json] [--pretty] [--session <id>]",
      "summary": "remove a registered extension entry (idempotent when missing)"
    },
    {
      "id": "open",
      "usage": "surfwright open <url> [--profile <name>] [--reuse-url] [--allow-download] [--download-out-dir <path>] [--browser-mode <headless|headed>] [--isolation <mode>] [--timeout-ms <ms>] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "open URL and return minimal page report with target handle"
    },
    {
      "id": "run",
      "usage": "surfwright run [--plan <path>|--plan-json <json>|--replay <path>] [--doctor] [--record] [--record-path <path>] [--record-label <label>] [--log-ndjson <path>] [--log-mode <minimal|full>] [--profile <name>] [--browser-mode <headless|headed>] [--isolation <mode>] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "execute, lint, record, or replay deterministic multi-step browser plans"
    },
    {
      "id": "session.attach",
      "usage": "surfwright session attach --cdp <origin> [--session-id <id>] [--policy <policy>] [--lease-ttl-ms <ms>] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "explicitly attach to an already running CDP endpoint"
    },
    {
      "id": "session.clear",
      "usage": "surfwright session clear [--keep-processes] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "clear all sessions and, by default, shut down associated browser processes"
    },
    {
      "id": "session.cookie-copy",
      "usage": "surfwright session cookie-copy --from-session <id> --to-session <id> --url <url> [--url <url> ...] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "copy scoped cookies from one reachable session to another"
    },
    {
      "id": "session.ensure",
      "usage": "surfwright session ensure [--browser-mode <headless|headed>] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "reuse active session if reachable; otherwise use managed default"
    },
    {
      "id": "session.fresh",
      "usage": "surfwright session fresh [--session-id <id>] [--browser-mode <headless|headed>] [--lease-ttl-ms <ms>] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "create a fresh ephemeral managed session and mark it active"
    },
    {
      "id": "session.list",
      "usage": "surfwright session list [--no-json] [--pretty]",
      "summary": "list known sessions and current active pointer"
    },
    {
      "id": "session.new",
      "usage": "surfwright session new [--session-id <id>] [--browser-mode <headless|headed>] [--policy <policy>] [--lease-ttl-ms <ms>] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "create a managed browser session and mark it active"
    },
    {
      "id": "session.prune",
      "usage": "surfwright session prune [--drop-managed-unreachable] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "prune unreachable sessions and repair stale managed pid metadata"
    },
    {
      "id": "session.use",
      "usage": "surfwright session use <sessionId> [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "switch active session after reachability check"
    },
    {
      "id": "skill.doctor",
      "usage": "surfwright skill doctor [--dest <path>] [--lock <path>] [--no-json] [--pretty]",
      "summary": "report installed skill health, compatibility, and lock drift"
    },
    {
      "id": "skill.install",
      "usage": "surfwright skill install [--source <path>] [--dest <path>] [--lock <path>] [--no-json] [--pretty]",
      "summary": "install skill atomically with contract compatibility gates"
    },
    {
      "id": "skill.update",
      "usage": "surfwright skill update [--source <path>] [--dest <path>] [--lock <path>] [--no-json] [--pretty]",
      "summary": "update skill atomically with compatibility checks and rollback safety"
    },
    {
      "id": "state.reconcile",
      "usage": "surfwright state reconcile [--timeout-ms <ms>] [--max-age-hours <h>] [--max-per-session <n>] [--drop-managed-unreachable] [--no-json] [--pretty]",
      "summary": "repair and prune state for resilient post-restart recovery"
    },
    {
      "id": "target.click",
      "usage": "surfwright target click <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] [--index <n>] [--explain] [--wait-for-text <text> | --wait-for-selector <query> | --wait-network-idle] [--snapshot] [--delta] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "click the first matching element in a target"
    },
    {
      "id": "target.click-at",
      "usage": "surfwright target click-at <targetId> --x <n> --y <n> [--button <left|middle|right>] [--click-count <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "click explicit viewport coordinates on a target"
    },
    {
      "id": "target.close",
      "usage": "surfwright target close <targetId> [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "close a target by handle with deterministic confirmation payload"
    },
    {
      "id": "target.console-get",
      "usage": "surfwright target console-get <targetId> [--capture-ms <ms>] [--levels <csv>] [--contains <text>] [--reload] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "return first structured console/pageerror/requestfailed event in a bounded capture window"
    },
    {
      "id": "target.console-tail",
      "usage": "surfwright target console-tail <targetId> [--capture-ms <ms>] [--max-events <n>] [--levels <csv>] [--reload] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "stream live console/pageerror/requestfailed events as NDJSON"
    },
    {
      "id": "target.count",
      "usage": "surfwright target count <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "count matching elements by text or selector in a target"
    },
    {
      "id": "target.dialog",
      "usage": "surfwright target dialog <targetId> [--action <accept|dismiss>] [--prompt-text <text>] [--trigger-text <query> | --trigger-selector <query>] [--contains <text>] [--visible-only] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "accept or dismiss the next dialog, optionally with trigger click"
    },
    {
      "id": "target.download",
      "usage": "surfwright target download <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] [--index <n>] [--download-out-dir <path>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "click a deterministic element and capture a download artifact"
    },
    {
      "id": "target.drag-drop",
      "usage": "surfwright target drag-drop <targetId> --from <selector> --to <selector> [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "perform deterministic drag and drop between selectors"
    },
    {
      "id": "target.emulate",
      "usage": "surfwright target emulate <targetId> [--width <n>] [--height <n>] [--user-agent <ua>] [--color-scheme <light|dark|no-preference>] [--touch | --no-touch] [--device-scale-factor <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "apply bounded viewport and environment emulation on a target"
    },
    {
      "id": "target.eval",
      "usage": "surfwright target eval <targetId> (--expr <js> | --expression <js> | --js <js> | --script <js> | --script-file <path>) [--mode <expr|script>] [--arg-json <json>] [--frame-id <id>] [--capture-console] [--max-console <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "execute bounded JavaScript in page context for a target"
    },
    {
      "id": "target.extract",
      "usage": "surfwright target extract <targetId> [--kind <kind>] [--selector <query>] [--visible-only] [--frame-scope <scope>] [--limit <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "extract structured content records (blog/news/docs/generic) from a target"
    },
    {
      "id": "target.fill",
      "usage": "surfwright target fill <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] --value <text> [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "fill the first matching form control in a target"
    },
    {
      "id": "target.find",
      "usage": "surfwright target find <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] [--first] [--limit <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "find matching elements by text or selector in a target"
    },
    {
      "id": "target.form-fill",
      "usage": "surfwright target form-fill <targetId> (--fields-json <json> | --fields-file <path> | --field <selector=value>...) [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "fill multiple form controls in one deterministic command"
    },
    {
      "id": "target.frames",
      "usage": "surfwright target frames <targetId> [--limit <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "list frames for a target with stable frame handles"
    },
    {
      "id": "target.health",
      "usage": "surfwright target health <targetId> [--timeout-ms <ms>] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "return target diagnostics with readiness checks and hints"
    },
    {
      "id": "target.hover",
      "usage": "surfwright target hover <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--properties <csv>] [--settle-ms <ms>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "hover the first matching element and return compact style diffs"
    },
    {
      "id": "target.hud",
      "usage": "surfwright target hud <targetId> [--timeout-ms <ms>] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "return compact operator HUD payload for fast triage"
    },
    {
      "id": "target.keypress",
      "usage": "surfwright target keypress <targetId> --key <key> [--text <query> | --selector <query>] [--contains <text>] [--visible-only] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "send a deterministic keypress to page or focused matched element"
    },
    {
      "id": "target.list",
      "usage": "surfwright target list [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "list current page targets with explicit target handles"
    },
    {
      "id": "target.motion-detect",
      "usage": "surfwright target motion-detect <targetId> --selector <query> [--contains <text>] [--visible-only] [--property <name>] [--interval-ms <ms>] [--duration-ms <ms>] [--max-samples <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "detect autonomous property motion for a selector over a bounded window"
    },
    {
      "id": "target.network",
      "usage": "surfwright target network <targetId> [--action-id <id>] [--profile <preset>] [--view <mode>] [--fields <csv>] [--capture-ms <ms>] [--max-requests <n>] [--max-websockets <n>] [--max-ws-messages <n>] [--body-sample-bytes <n>] [--redact-regex <pattern> ...] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--include-headers] [--include-post-data] [--no-ws-messages] [--reload] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "capture bounded network/websocket diagnostics and performance summary for a target"
    },
    {
      "id": "target.network-around",
      "usage": "surfwright target network-around <targetId> (--click-text <query> | --click-selector <query>) [--contains <text>] [--visible-only] [--index <n>] [--wait-for-text <text> | --wait-for-selector <query> | --wait-network-idle] [--snapshot] [--delta] [--frame-scope <scope>] [--action-id <id>] [--profile <preset>] [--max-runtime-ms <ms>] [--max-requests <n>] [--max-websockets <n>] [--max-ws-messages <n>] [--body-sample-bytes <n>] [--redact-regex <pattern> ...] [--include-headers] [--include-post-data] [--no-ws-messages] [--view <mode>] [--fields <csv>] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "capture network around a deterministic click and return combined click + network report"
    },
    {
      "id": "target.network-begin",
      "usage": "surfwright target network-begin <targetId> [--action-id <id>] [--profile <preset>] [--max-runtime-ms <ms>] [--max-requests <n>] [--max-websockets <n>] [--max-ws-messages <n>] [--body-sample-bytes <n>] [--redact-regex <pattern> ...] [--include-headers] [--include-post-data] [--no-ws-messages] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "start handle-based background network capture for an action window"
    },
    {
      "id": "target.network-check",
      "usage": "surfwright target network-check [targetId] --budget <path> [--capture-id <id>] [--artifact-id <id>] [--profile <preset>] [--capture-ms <ms>] [--fail-on-violation] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "evaluate network metrics against budget thresholds"
    },
    {
      "id": "target.network-end",
      "usage": "surfwright target network-end <captureId> [--profile <preset>] [--view <mode>] [--fields <csv>] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--timeout-ms <ms>] [--no-json] [--pretty]",
      "summary": "stop background capture handle and return projected analysis report"
    },
    {
      "id": "target.network-export",
      "usage": "surfwright target network-export <targetId> --out <path> [--action-id <id>] [--format har] [--profile <preset>] [--capture-ms <ms>] [--max-requests <n>] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--reload] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "export filtered network capture as artifact (har)"
    },
    {
      "id": "target.network-export-list",
      "usage": "surfwright target network-export-list [--limit <n>] [--no-json] [--pretty]",
      "summary": "list indexed network export artifacts"
    },
    {
      "id": "target.network-export-prune",
      "usage": "surfwright target network-export-prune [--max-age-hours <h>] [--max-count <n>] [--max-total-mb <n>] [--keep-files] [--no-json] [--pretty]",
      "summary": "prune indexed export artifacts by retention policy"
    },
    {
      "id": "target.network-query",
      "usage": "surfwright target network-query [--capture-id <id> | --artifact-id <id>] [--preset <name>] [--limit <n>] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--no-json] [--pretty]",
      "summary": "query saved network captures/artifacts with high-signal presets"
    },
    {
      "id": "target.network-tail",
      "usage": "surfwright target network-tail <targetId> [--action-id <id>] [--profile <preset>] [--capture-ms <ms>] [--max-events <n>] [--max-ws-messages <n>] [--url-contains <text>] [--method <verb>] [--resource-type <type>] [--status <code|class>] [--failed-only] [--reload] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "stream live network/websocket events as NDJSON for short capture windows"
    },
    {
      "id": "target.observe",
      "usage": "surfwright target observe <targetId> --selector <query> [--contains <text>] [--visible-only] [--property <name>] [--interval-ms <ms>] [--duration-ms <ms>] [--max-samples <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "capture bounded time-series samples for a selector property on a target"
    },
    {
      "id": "target.prune",
      "usage": "surfwright target prune [--max-age-hours <h>] [--max-per-session <n>] [--no-json] [--pretty]",
      "summary": "prune stale/orphan target metadata with age and size caps"
    },
    {
      "id": "target.read",
      "usage": "surfwright target read <targetId> [--selector <query>] [--visible-only] [--frame-scope <scope>] [--chunk-size <n>] [--chunk <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "read target text in deterministic chunks"
    },
    {
      "id": "target.screenshot",
      "usage": "surfwright target screenshot <targetId> --out <path> [--full-page] [--type <png|jpeg>] [--quality <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "capture deterministic screenshot artifact metadata for a target"
    },
    {
      "id": "target.scroll-plan",
      "usage": "surfwright target scroll-plan <targetId> [--steps <csv>] [--settle-ms <ms>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "execute deterministic scroll steps and report requested vs achieved positions"
    },
    {
      "id": "target.scroll-reveal-scan",
      "usage": "surfwright target scroll-reveal-scan <targetId> [--selector <query>] [--contains <text>] [--visible-only] [--max-candidates <n>] [--steps <csv>] [--settle-ms <ms>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "scan reveal-style candidates across scroll steps and report before/after deltas"
    },
    {
      "id": "target.scroll-sample",
      "usage": "surfwright target scroll-sample <targetId> --selector <query> [--contains <text>] [--visible-only] [--property <name>] [--steps <csv>] [--settle-ms <ms>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "execute deterministic scroll steps and sample selector property values at each step"
    },
    {
      "id": "target.scroll-watch",
      "usage": "surfwright target scroll-watch <targetId> --selector <query> [--contains <text>] [--visible-only] [--properties <csv>] [--steps <csv>] [--settle-ms <ms>] [--max-events <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "watch class/computed-style deltas and transition events while running a scroll plan"
    },
    {
      "id": "target.snapshot",
      "usage": "surfwright target snapshot <targetId> [--mode <snapshot|orient>] [--selector <query>] [--visible-only] [--frame-scope <scope>] [--cursor <token>] [--include-selector-hints] [--max-chars <n>] [--max-headings <n>] [--max-buttons <n>] [--max-links <n>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "read bounded text and UI primitives for a target"
    },
    {
      "id": "target.snapshot-diff",
      "usage": "surfwright target snapshot-diff <a> <b> [--no-json] [--pretty]",
      "summary": "diff two saved target snapshot reports with high-signal deltas"
    },
    {
      "id": "target.spawn",
      "usage": "surfwright target spawn <targetId> (--text <query> | --selector <query>) [--contains <text>] [--visible-only] [--frame-scope <scope>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "click a trigger and return deterministic child target handle"
    },
    {
      "id": "target.sticky-check",
      "usage": "surfwright target sticky-check <targetId> [--selector <query>] [--contains <text>] [--visible-only] [--steps <csv>] [--settle-ms <ms>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "assert sticky behavior with deterministic scroll evidence"
    },
    {
      "id": "target.trace.begin",
      "usage": "surfwright target trace begin <targetId> [--action-id <id>] [--profile <preset>] [--max-runtime-ms <ms>] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "start performance trace capture and return trace handle"
    },
    {
      "id": "target.trace.export",
      "usage": "surfwright target trace export [targetId] --out <path> [--trace-id <id>] [--profile <preset>] [--capture-ms <ms>] [--format <json|json.gz>] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "export trace payload to json/json.gz from trace handle or live capture"
    },
    {
      "id": "target.trace.insight",
      "usage": "surfwright target trace insight [targetId] [--trace-id <id>] [--artifact-id <id>] [--profile <preset>] [--capture-ms <ms>] [--timeout-ms <ms>] [--no-json] [--pretty] [--session <id>]",
      "summary": "return one bounded high-signal trace insight from capture/artifact/live source"
    },
    {
      "id": "target.transition-assert",
      "usage": "surfwright target transition-assert <targetId> [--cycles <n>] [--capture-ms <ms>] [--max-events <n>] [--click-text <query> | --click-selector <query>] [--contains <text>] [--visible-only] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "run repeated trigger cycles and assert transition/animation event evidence"
    },
    {
      "id": "target.transition-trace",
      "usage": "surfwright target transition-trace <targetId> [--capture-ms <ms>] [--max-events <n>] [--click-text <query> | --click-selector <query>] [--contains <text>] [--visible-only] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "capture transition/animation events over a bounded window with optional click trigger"
    },
    {
      "id": "target.upload",
      "usage": "surfwright target upload <targetId> --selector <query> --file <path> [--file <path>...] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "upload one or more files via input or file chooser fallback"
    },
    {
      "id": "target.url-assert",
      "usage": "surfwright target url-assert <targetId> [--host <host>] [--origin <origin>] [--path-prefix <prefix>] [--url-prefix <prefix>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "assert current target URL matches expected host/origin/path/url prefixes"
    },
    {
      "id": "target.wait",
      "usage": "surfwright target wait <targetId> (--for-text <text> | --for-selector <query> | --network-idle) [--frame-scope <scope>] [--timeout-ms <ms>] [--no-persist] [--fields <csv>] [--no-json] [--pretty] [--session <id>]",
      "summary": "wait for deterministic readiness condition on a target"
    },
    {
      "id": "update.check",
      "usage": "surfwright update check [--package <name>] [--channel <stable|beta|dev>] [--policy <manual|pinned|safe-patch>] [--pinned-version <x.y.z>] [--check-on-start <true|false>] [--no-json] [--pretty]",
      "summary": "check available CLI updates with channel/policy-aware preflight"
    },
    {
      "id": "update.rollback",
      "usage": "surfwright update rollback [--package <name>] [--dry-run] [--no-json] [--pretty]",
      "summary": "rollback CLI to previous known-good version from update history"
    },
    {
      "id": "update.run",
      "usage": "surfwright update run [--package <name>] [--channel <stable|beta|dev>] [--policy <manual|pinned|safe-patch>] [--pinned-version <x.y.z>] [--check-on-start <true|false>] [--dry-run] [--no-json] [--pretty]",
      "summary": "apply CLI update via authoritative update pipeline with doctor verification"
    },
    {
      "id": "workspace.info",
      "usage": "surfwright workspace info [--no-json] [--pretty]",
      "summary": "show resolved project workspace (./.surfwright) for reusable profiles"
    },
    {
      "id": "workspace.init",
      "usage": "surfwright workspace init [--no-json] [--pretty]",
      "summary": "create a project workspace (./.surfwright) with gitignored profile storage"
    },
    {
      "id": "workspace.profile-lock-clear",
      "usage": "surfwright workspace profile-lock-clear <profile> [--force] [--no-json] [--pretty]",
      "summary": "clear a stale workspace profile lock (safe by default)"
    },
    {
      "id": "workspace.profile-locks",
      "usage": "surfwright workspace profile-locks [--no-json] [--pretty]",
      "summary": "list workspace profile lock files with staleness hints"
    }
  ],
  "errors": [
    {
      "code": "E_ASSERT_FAILED",
      "retryable": false
    },
    {
      "code": "E_BROWSER_NOT_FOUND",
      "retryable": false
    },
    {
      "code": "E_BROWSER_START_FAILED",
      "retryable": true
    },
    {
      "code": "E_BROWSER_START_TIMEOUT",
      "retryable": true
    },
    {
      "code": "E_CDP_INVALID",
      "retryable": false
    },
    {
      "code": "E_CDP_UNREACHABLE",
      "retryable": true
    },
    {
      "code": "E_EVAL_RESULT_UNSERIALIZABLE",
      "retryable": false
    },
    {
      "code": "E_EVAL_RUNTIME",
      "retryable": false
    },
    {
      "code": "E_EVAL_SCRIPT_TOO_LARGE",
      "retryable": false
    },
    {
      "code": "E_EVAL_TIMEOUT",
      "retryable": true
    },
    {
      "code": "E_INTERNAL",
      "retryable": true
    },
    {
      "code": "E_PROFILE_INVALID",
      "retryable": false
    },
    {
      "code": "E_PROFILE_LOCKED",
      "retryable": true
    },
    {
      "code": "E_QUERY_INVALID",
      "retryable": false
    },
    {
      "code": "E_SELECTOR_INVALID",
      "retryable": false
    },
    {
      "code": "E_SESSION_CONFLICT",
      "retryable": false
    },
    {
      "code": "E_SESSION_EXISTS",
      "retryable": false
    },
    {
      "code": "E_SESSION_ID_INVALID",
      "retryable": false
    },
    {
      "code": "E_SESSION_NOT_FOUND",
      "retryable": false
    },
    {
      "code": "E_SESSION_REQUIRED",
      "retryable": false
    },
    {
      "code": "E_SESSION_UNREACHABLE",
      "retryable": true
    },
    {
      "code": "E_SKILL_COMPAT_CONTRACT_MISMATCH",
      "retryable": false
    },
    {
      "code": "E_SKILL_COMPAT_CONTRACT_SCHEMA_MISMATCH",
      "retryable": false
    },
    {
      "code": "E_SKILL_COMPAT_VERSION_MISMATCH",
      "retryable": false
    },
    {
      "code": "E_SKILL_INSTALL_ATOMIC_SWAP_FAILED",
      "retryable": true
    },
    {
      "code": "E_SKILL_MANIFEST_INVALID",
      "retryable": false
    },
    {
      "code": "E_SKILL_SOURCE_NOT_FOUND",
      "retryable": false
    },
    {
      "code": "E_STATE_LOCK_IO",
      "retryable": true
    },
    {
      "code": "E_STATE_LOCK_TIMEOUT",
      "retryable": true
    },
    {
      "code": "E_TARGET_ID_INVALID",
      "retryable": false
    },
    {
      "code": "E_TARGET_NOT_FOUND",
      "retryable": false
    },
    {
      "code": "E_TARGET_SESSION_MISMATCH",
      "retryable": false
    },
    {
      "code": "E_TARGET_SESSION_UNKNOWN",
      "retryable": false
    },
    {
      "code": "E_UPDATE_APPLY_FAILED",
      "retryable": true
    },
    {
      "code": "E_UPDATE_HEALTHCHECK_FAILED",
      "retryable": true
    },
    {
      "code": "E_UPDATE_METADATA",
      "retryable": true
    },
    {
      "code": "E_UPDATE_PRECONDITION",
      "retryable": false
    },
    {
      "code": "E_UPDATE_ROLLBACK_NOT_AVAILABLE",
      "retryable": false
    },
    {
      "code": "E_URL_INVALID",
      "retryable": false
    },
    {
      "code": "E_WAIT_TIMEOUT",
      "retryable": true
    },
    {
      "code": "E_WORKSPACE_INVALID",
      "retryable": false
    },
    {
      "code": "E_WORKSPACE_NOT_FOUND",
      "retryable": false
    }
  ]
}
